<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meal Finder</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
<style>
  body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
  .meal-card {
    background-color: #fff;       
    border-radius: 12px;           
    padding: 20px;                 
    margin: 20px auto;             
    box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
    width:2000px;           
  }
  .breadcrumb { background-color: #f15b2a; color: white; padding: 10px 20px; font-weight: bold; }
  .section-title { font-size: 24px; text-align: left; }
  .underline { border-bottom: 3px solid orange; padding-bottom: 2px; }
  #recipe-details { display: flex; gap: 40px; margin: 20px; }
  #meal-image { max-width: 600px; height: 700px; }
  .meal-info { flex: 1; }
  .meal-meta p { font-size: 20px; margin: 5px 0; }
  #meal-source{ text-decoration: none; color:black; }
  #meal-tags{ border: 2px solid orangered; color: orangered; }
  .meal-heading {
    display: inline-block; 
    border-bottom: 3px solid orange; 
    padding-bottom: 5px; 
    font-size: 35px;
    width: 500px;
    color: orangered;
  }
  .ingredients {
    background-color: #f15b2a;
    color: white;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    width: 700px;
    height: 500px;
    font-size: 30px;
  }
  .ingredients ul {
    list-style: none;
    padding-left: 0;
    display: grid;
    grid-template-columns: repeat(3, 1fr); 
    gap: 10px;
  }
  .ingredients li { margin-bottom: 8px; font-size: 25px; }
  .ingredients button { background-color: darkgreen; color: white; border: none; padding: 4px 8px; border-radius: 50px; margin-right: 5px; }
  .measures {
    background-color: whitesmoke;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
  }
  .measures ul {
    display: grid;
    grid-template-columns: repeat(2, 1fr); 
    gap: 10px;
    padding-left: 0;
    margin: 0;
  }
  .measures li {
    list-style: none;
    font-size: 14px;
    display: flex;
    align-items: center;
    padding: 5px;
    border-radius: 5px;
  }
  .measures li i { color: orangered; margin-right: 5px; }
  .instructions { background-color: white; color: black; padding: 15px; border-radius: 8px; }
  .instructions ol { list-style: none; padding-left: 0; }
  .instructions li { margin-bottom: 8px; font-size: 14px; }
  .instructions li i { color: orangered; margin-right: 8px; }
</style>
</head>
<body>
 <div class="topbar">
  <div class="container">
    <div class="logo">
      <i class="fa-solid fa-house"></i>
      <a href="index.html" target="_blank">MEALFINDER</a>
    </div>
    <div class="menu-icon">
      <i class="fa-solid fa-bars"></i>
      <nav class="menu-list" id="menuList">
        <ul>
          <li><a href="./Beef.html">Beef</a></li>
          <li><a href="./chicken.html">Chicken</a></li>
          <li><a href="./Dessert.html">Dessert</a></li>
          <li><a href="./Lamba.html">Lamb</a></li>
          <li><a href="./Pasta.html">Pasta</a></li>
          <li><a href="./seafood.html">Seafood</a></li>
          <li><a href="./vegan.html">Vegan</a></li>
          <li><a href="./vegeterian.html">Vegetarian</a></li>
          <li><a href="./Breakfast.html">Breakfast</a></li>
          <li><a href="./Goat.html">Goat</a></li>
        </ul>
      </nav>
    </div>
  </div>
</div>

<header class="header">
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search recipes here.." />
    <button id="searchBtn"><i class="fa-solid fa-magnifying-glass"></i></button>
  </div>
  <div class="hero-text">
    <h1>What are your favorite cuisines?</h1>
    <p>PERSONALIZE YOUR EXPERIENCE</p>
  </div>
</header>

<div class="meal-card">
<div class="breadcrumb">
  <i class="fa-solid fa-house"></i> 
  <i class="fa-solid fa-angle-double-right"></i> 
  <strong id="meal-name-breadcrumb">Meal</strong>
</div>

<h2 class="section-title"><span class="underline">MEAL</span> DETAILS</h2>

<section id="recipe-details">
  <div>
    <img id="meal-image" src="" alt="Meal Image">
  </div>

  <div class="meal-info">
    <div class="meal-meta">
      <h2 class="meal-heading">Cabbage soup (shchi)</h2>
      <p><b>Category:</b> <span id="meal-category"></span></p>
      <p><b>Source:</b> <a id="meal-source" href="#" target="_blank">View Source</a></p>
      <p><b>Tags:</b> <span id="meal-tags"></span></p>
    </div>

    <div class="ingredients">
      <h4>Ingredients</h4>
      <ul id="ingredients-list"></ul>
    </div>
  </div>
</section>

<div class="bottom-section" style="margin: 20px;">
  <div class="measures">
    <h4>Measures</h4>
    <ul id="measures-list"></ul>
  </div>
  <div class="instructions">
    <h4>Instructions</h4>
    <ol id="instructions-list"></ol>
  </div>
</div>
</div>

<h2 class="heading">Categories</h2>
<div id="categories"></div>
<div id="meals"></div>

<script>
const API_CATEGORIES = "https://www.themealdb.com/api/json/v1/1/categories.php";
const API_SEARCH = "https://www.themealdb.com/api/json/v1/1/search.php?s=";
const API_FILTER = "https://www.themealdb.com/api/json/v1/1/filter.php?c=";

const categoriesDiv = document.getElementById("categories");
const mealsDiv = document.getElementById("meals");
const searchBtn = document.getElementById("searchBtn");
const searchInput = document.getElementById("searchInput");

const menuIcon = document.querySelector(".menu-icon");
const menuList = document.getElementById("menuList");

menuIcon.addEventListener("click", () => {
  menuList.style.display = (menuList.style.display === "block") ? "none" : "block";
});

const mealName = "Cabbage Soup";
const apiUrl = `https://www.themealdb.com/api/json/v1/1/search.php?s=${mealName}`;

fetch(apiUrl)
   .then(res => res.json())
   .then(data => {
     const meal = data.meals[0];
     if (!meal) return;

    document.getElementById('meal-name-breadcrumb').textContent = meal.strMeal;
    document.getElementById('meal-image').src = meal.strMealThumb;
    document.getElementById('meal-category').textContent = meal.strCategory || 'N/A';
    document.getElementById('meal-tags').textContent = meal.strTags || 'No tags';
    const sourceLink = document.getElementById('meal-source');
    if (meal.strSource) {
      sourceLink.href = meal.strSource;
      sourceLink.textContent = "Source Link";
    } else {
      sourceLink.textContent = "No source available";
      sourceLink.removeAttribute("href");
    }

    const ingredientsUl = document.getElementById('ingredients-list');
    ingredientsUl.innerHTML = "";
    for (let i = 1; i <= 20; i++) {
      const ingredient = meal[`strIngredient${i}`];
      if (ingredient && ingredient.trim() !== "") {
        const liIng = document.createElement('li');
        liIng.innerHTML = `<button>${i}</button> ${ingredient}`;
        ingredientsUl.appendChild(liIng);
      }
    }

    const measuresUl = document.getElementById('measures-list');
    measuresUl.innerHTML = "";
    for (let i = 1; i <= 20; i++) {
      const ingredient = meal[`strIngredient${i}`];
      const measure = meal[`strMeasure${i}`];
      if (ingredient && ingredient.trim() !== "" && measure && measure.trim() !== "") {
        const liMeasure = document.createElement('li');
        liMeasure.innerHTML = `<i class="fa-solid fa-spoon"></i> ${measure}`;
        measuresUl.appendChild(liMeasure);
      }
    }

    const instructionsOl = document.getElementById('instructions-list');
    instructionsOl.innerHTML = "";
    const steps = meal.strInstructions.split('. ').filter(step => step.trim() !== "");
    steps.forEach(step => {
      const li = document.createElement('li');
      li.innerHTML = `<i class="fa-regular fa-square-check"></i> ${step}.`;
      instructionsOl.appendChild(li);
    });
  });

fetch(API_CATEGORIES)
  .then(res => res.json())
  .then(data => {
    categoriesDiv.innerHTML = "";
    data.categories.forEach(cat => {
      let div = document.createElement("div");
      div.classList.add("card");
      div.innerHTML = `
        <img src="${cat.strCategoryThumb}" alt="${cat.strCategory}">
        <div class="tag">${cat.strCategory}</div> 
      `;
      div.addEventListener("click", () => fetchMealsByCategory(cat.strCategory));
      categoriesDiv.appendChild(div);
    });
  });

function fetchMealsByCategory(category) {
  fetch(API_FILTER + category)
    .then(res => res.json())
    .then(data => {
      mealsDiv.innerHTML = "";
      data.meals.forEach(meal => {
        let div = document.createElement("div");
        div.classList.add("card");
        div.innerHTML = `
          <img src="${meal.strMealThumb}" alt="${meal.strMeal}">
          <h4>${meal.strMeal}</h4>
        `;
        mealsDiv.appendChild(div);
      });
    });
}

searchBtn.addEventListener("click", () => {
  let query = searchInput.value.trim();
  if (query) {
    fetch(API_SEARCH + query)
      .then(res => res.json())
      .then(data => {
        mealsDiv.innerHTML = "";
        if (data.meals) {
          data.meals.forEach(meal => {
            let div = document.createElement("div");
            div.classList.add("card");
            div.innerHTML = `
              <img src="${meal.strMealThumb}" alt="${meal.strMeal}">
              <h4>${meal.strMeal}</h4>
            `;
            mealsDiv.appendChild(div);
          });
        } else {
          mealsDiv.innerHTML = "<p>No meals found!</p>";
        }
      });
  }
});
</script>
</body>
</html>
